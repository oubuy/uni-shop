<view class="attrDialog"><view class="bg"></view><view class="attrDialogContent"><view class="contentTop"><view class="contentImg"><image src="{{imgUrl+image}}" mode></image></view><view class="contentTopTxt"><text class="price">{{"¥"+currentprice}}</text><text class="attr">{{checkAttr}}</text></view><view data-event-opts="{{[['tap',[['closeDialog',['$event']]]]]}}" class="iconfont _i" bindtap="__e"></view></view><view class="attrList"><block wx:for="{{attr}}" wx:for-item="item" wx:for-index="index"><view class="attrItem"><view class="attrItemTit">{{''+item.attrname+''}}</view><view class="attrItemVal"><block wx:for="{{item.value}}" wx:for-item="child" wx:for-index="childindex" wx:key="childindex"><view data-event-opts="{{[['tap',[['attrCheck',[index,childindex]]]]]}}" class="{{['attrValItem',(valindex[index]==childindex)?'activeAttr':'']}}" bindtap="__e">{{''+child+''}}</view></block></view></view></block><view class="attrItem"><view class="attrItemTit">数量</view><view class="attrItemVal"><view class="shopNum"><view data-event-opts="{{[['tap',[['reduce',['$event']]]]]}}" class="button" bindtap="__e">-</view><view><input type="text" disabled data-event-opts="{{[['input',[['__set_model',['','num','$event',[]]]]]]}}" value="{{num}}" bindinput="__e"/></view><view data-event-opts="{{[['tap',[['add',['$event']]]]]}}" class="button" bindtap="__e">+</view></view><text class="stock">{{"(库存："+stock+"件)"}}</text></view></view></view></view><view data-event-opts="{{[['tap',[['attrButton',['$event']]]]]}}" class="attrButton" bindtap="__e">{{''+buttonTxt+''}}</view></view>